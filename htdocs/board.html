<?php
require('lib/board.php');
require('lib/nav.php');
?>

<!doctype html>
<html>
<head>
    <title>커뮤니티 웹 사이트</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- 부트스트랩 CSS 추가하기 -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/sidebar.css">
</head>
<body>
<div class="container-fluid">
    <div class="row d-flex d-md-block flex-nowrap wrapper">
        <?php

        nav();
        ?>

        <main id="main" class="col-md-9 float-left col pl-md-5 pt-3 main">
            <div class="page-header mt-3">
                <h2>자유게시판</h2>
            </div>
            <p class="lead">다른 회원들과 자유롭게 소통하세요.</p>
            <hr>
            <table class="table table-striped" style="max-width: 1080px;">
                <thead>
                <tr>
                    <th scope="col" class="mobile" style="width:55px; text-align:center;">번호</th>
                    <th scope="col" class="mobile" style="text-align:center;">제목</th>
                    <!--
                                        <th scope="col" class="mobile" style="width:120px; text-align:center;">날짜</th>
                    -->
                </tr>
                </thead>
                <tbody>

                <?php
                print_list($_GET['page']);
                ?>
                </tbody>
            </table>
            <div style="max-width: 1080px;">
                <a href="boardWrite.html" class="btn btn-primary float-right">글쓰기</a>
            </div>
            <ul class="pagination">
                <?php
                //현재 페이지 값을 통해 현재의 구역값(ex 1~10, 31~40)을 얻음
                //-1을 한것은 예를 들어 40페이지면 다음섹션으로 인식돼서
                $nowSection = floor((int)($_GET['page']-1)/10);
                echo $nowSection;

                if($nowSection ==0){
                         echo'
                <li class="page-item disabled">
                <a class="page-link" href="board.html?page='.((($nowSection-1)*10)+1).'">&laquo;</a>
                </li>
                ';
                }
                else{
                echo'
                <li class="page-item ">
                    <a class="page-link" href="board.html?page='.((($nowSection-1)*10)+1).'">&laquo;</a>
                </li>
                ';
                }

                for ( $count = $nowSection*10 +1 ; $count <= $nowSection*10 +10; $count++){
                if(strcmp($_GET['page'], $count) == 0){
                echo '
                <li class="page-item active "><a href="board.html?page='.$count.'"
                                                 class="page-link mobile">'.$count.'</a></li>
                ';

                }
                else{
                echo '
                <li class="page-item "><a href="board.html?page='.$count.'" class="page-link mobile">'.$count.'</a></li>
                ';

                }


                }

                echo'
                <li class="page-item">
                    <a class="page-link" href="board.html?page='.((($nowSection+1)*10)+1).'">&raquo;</a>
                </li>
                ';
                ?>
            </ul>
            <footer class="text-center" style="max-width: 1080px;">
                <!--            <p>Copyright ⓒ 2019 <b>이현준</b> All Rights Reserved.</p>-->
            </footer>
        </main>
    </div>
</div>
<!-- 제이쿼리 자바스크립트 추가하기 -->
<script src="js/jquery.min.js"></script>
<!-- Popper 자바스크립트 추가하기 -->
<script src="js/popper.min.js"></script>
<!-- 부트스트랩 자바스크립트 추가하기 -->
<script src="js/bootstrap.min.js"></script>
</body>
</html>
